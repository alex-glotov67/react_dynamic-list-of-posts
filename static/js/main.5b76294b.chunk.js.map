{"version":3,"sources":["components/PostsList/PostsList.tsx","api/api.ts","api/posts.ts","components/Loader/Loader.tsx","components/NewCommentForm/NewCommentForm.tsx","components/PostDetails/PostDetails.tsx","App.tsx","api/users.ts","index.tsx"],"names":["PostsList","props","changePostId","selectedPostId","posts","className","map","post","userId","body","type","classNames","id","onClick","BASE_URL","getAllPosts","endpoint","fetch","then","response","ok","Error","json","getPostComments","postId","Loader","NewCommentForm","addNewComment","useState","setBody","name","setName","email","setEmail","handleAddComment","event","preventDefault","placeholder","value","onChange","target","handleNameChange","handleEmailChange","handleCommentChange","PostDetails","setPost","comments","setComments","isCommentsVisible","setIsCommentVisible","loader","setLoader","useEffect","removeComment","commentId","method","deleteComment","commentsFromServer","length","comment","newComment","headers","JSON","stringify","addComment","App","users","setUsers","setPosts","selectedUserID","setSelectedUserID","selectedPostID","setSelectedPostID","user","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5b76294b.chunk.js","sourcesContent":["import classNames from 'classnames';\nimport './PostsList.scss';\n\ninterface Props {\n  changePostId: (postId: number) => void;\n  selectedPostId: number;\n  posts: Post[];\n}\n\nexport const PostsList: React.FC<Props> = (props) => {\n  const {\n    changePostId,\n    selectedPostId,\n    posts,\n  } = props;\n\n  return (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n\n      <ul className=\"PostsList__list\">\n        {posts.map(post => (\n          <li\n            className=\"PostsList__item\"\n            key={post.id}\n          >\n            <div>\n              <b>{`[User #${post.userId}]: `}</b>\n              {post.body}\n            </div>\n            <button\n              type=\"button\"\n              className={classNames(\n                'PostsList__button',\n                'button',\n                { 'PostsList__button--choosed': selectedPostId === post.id },\n              )}\n              onClick={() => {\n                if (selectedPostId === post.id) {\n                  changePostId(0);\n                } else {\n                  changePostId(post.id);\n                }\n              }}\n            >\n              {selectedPostId === post.id ? 'Close' : 'Open'}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","export const BASE_URL = 'https://mate.academy/students-api';\n","import { BASE_URL } from './api';\n\nexport const getAllPosts = (endpoint = ''):Promise<Post[]> => {\n  return fetch(`${BASE_URL}/posts${endpoint}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Error');\n      }\n\n      return response.json();\n    });\n};\n\nexport const getUserPosts = (userId: number):Promise<Post[]> => {\n  return getAllPosts(`?userId=${userId}`);\n};\n\nexport const getPostDetails = (postId: number):Promise<Post> => {\n  return fetch(`${BASE_URL}/posts/${postId}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Error');\n      }\n\n      return response.json();\n    });\n};\n\nexport const getPostComments = (postId: number):Promise<Comment[]> => {\n  return fetch(`${BASE_URL}/comments?postId=${postId}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Error');\n      }\n\n      return response.json();\n    });\n};\n\nexport const addComment = (newComment: Partial<Comment>) => {\n  return fetch(`${BASE_URL}/comments`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json; charset=UTF-8',\n    },\n    body: JSON.stringify(newComment),\n  });\n};\n\nexport const deleteComment = (commentId: number) => {\n  return fetch(`${BASE_URL}/comments/${commentId}`, {\n    method: 'DELETE',\n  });\n};\n","import React from 'react';\nimport './Loader.scss';\n\nexport const Loader: React.FC = () => (\n  <div className=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","import React, { useState } from 'react';\nimport './NewCommentForm.scss';\n\ninterface Props {\n  postId: number;\n  addNewComment: (newComment: Partial<Comment>) => void;\n}\n\nexport const NewCommentForm: React.FC<Props> = (props) => {\n  const { postId, addNewComment } = props;\n  const [body, setBody] = useState('');\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n\n  const reset = () => {\n    setBody('');\n    setName('');\n    setEmail('');\n  };\n\n  const handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setBody(event.target.value);\n  };\n\n  const handleNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setName(event.target.value);\n  };\n\n  const handleEmailChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setEmail(event.target.value);\n  };\n\n  const handleAddComment = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n    event.preventDefault();\n    addNewComment({\n      name,\n      email,\n      body,\n      postId,\n    });\n    reset();\n  };\n\n  return (\n    <form className=\"NewCommentForm\">\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          value={name}\n          onChange={(event) => handleNameChange(event)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"email\"\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          value={email}\n          onChange={(event) => handleEmailChange(event)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          value={body}\n          onChange={(event) => handleCommentChange(event)}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n        value={body}\n        onClick={(event) => handleAddComment(event)}\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","import React, { useEffect, useState } from 'react';\n// eslint-disable-next-line object-curly-newline\nimport { addComment, deleteComment, getPostComments, getPostDetails } from '../../api/posts';\nimport { Loader } from '../Loader';\nimport { NewCommentForm } from '../NewCommentForm';\nimport './PostDetails.scss';\n\ninterface Props {\n  selectedPostId: number;\n}\n\nexport const PostDetails: React.FC<Props> = (props) => {\n  const { selectedPostId } = props;\n  const [post, setPost] = useState({} as Post | null);\n  const [comments, setComments] = useState([] as Comment[]);\n  const [isCommentsVisible, setIsCommentVisible] = useState(true);\n  const [loader, setLoader] = useState(true);\n\n  useEffect(() => {\n    setLoader(true);\n\n    getPostDetails(selectedPostId)\n      .then(response => setPost(response));\n\n    getPostComments(selectedPostId)\n      .then(response => {\n        setComments(response);\n        setLoader(false);\n      });\n  }, [selectedPostId]);\n\n  const addNewComment = (newComment: Partial<Comment>) => {\n    addComment(newComment)\n      .then(() => getPostComments(selectedPostId))\n      .then(commentsFromServer => setComments(commentsFromServer));\n  };\n\n  const removeComment = (commentId: number) => {\n    deleteComment(commentId)\n      .then(() => getPostComments(selectedPostId))\n      .then(commentsFromServer => setComments(commentsFromServer));\n  };\n\n  const hideTriggerComments = () => {\n    setIsCommentVisible(!isCommentsVisible);\n  };\n\n  if (loader) {\n    return (\n      <Loader />\n    );\n  }\n\n  return (\n    <div className=\"PostDetails\">\n      <h2>Post details:</h2>\n      <section className=\"PostDetails__post\">\n        <p>{post?.body}</p>\n      </section>\n\n      <section className=\"PostDetails__comments\">\n        <button\n          type=\"button\"\n          className=\"button mb-5\"\n          onClick={() => hideTriggerComments()}\n        >\n          {isCommentsVisible ? 'Hide ' : 'Show '}\n          {`${comments.length} comments`}\n        </button>\n\n        <ul className=\"PostDetails__list\">\n          {isCommentsVisible && (\n            <>\n              {comments.map(comment => (\n                <li\n                  className=\"PostDetails__list-item\"\n                  key={comment.id}\n                >\n                  <button\n                    type=\"button\"\n                    className=\"PostDetails__remove-button button\"\n                    onClick={() => removeComment(comment.id)}\n                  >\n                    X\n                  </button>\n                  <p>{comment.body}</p>\n                </li>\n              ))}\n            </>\n          )}\n        </ul>\n      </section>\n\n      <section>\n        <div className=\"PostDetails__form-wrapper\">\n          <NewCommentForm\n            postId={selectedPostId}\n            addNewComment={addNewComment}\n          />\n        </div>\n      </section>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { getUsers } from './api/users';\nimport { getAllPosts, getUserPosts } from './api/posts';\nimport { Loader } from './components/Loader';\n\nconst App: React.FC = () => {\n  const [users, setUsers] = useState([] as User[]);\n  const [posts, setPosts] = useState([] as Post[]);\n  const [selectedUserID, setSelectedUserID] = useState(0);\n  const [selectedPostID, setSelectedPostID] = useState(0);\n  const [loader, setLoader] = useState(false);\n\n  const handleUserChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    setSelectedUserID(+event.target.value);\n  };\n\n  const changePostId = (postId: number) => {\n    setSelectedPostID(postId);\n  };\n\n  useEffect(() => {\n    getUsers()\n      .then(response => setUsers(response));\n  }, []);\n\n  useEffect(() => {\n    setLoader(false);\n\n    if (selectedUserID === 0) {\n      getAllPosts()\n        .then(response => {\n          setPosts(response);\n          setLoader(true);\n        });\n    } else {\n      setPosts([] as Post[]);\n      getUserPosts(selectedUserID)\n        .then(response => {\n          setPosts(response);\n          setLoader(true);\n        });\n    }\n  }, [selectedUserID]);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label>\n          Select a user: &nbsp;\n\n          <select\n            className=\"App__user-selector\"\n            onChange={handleUserChange}\n          >\n            <option value={0}>All users</option>\n            {users.map(user => (\n              <option\n                key={user.id}\n                value={user.id}\n              >\n                {user.name}\n              </option>\n            ))}\n          </select>\n        </label>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          {loader ? (\n            <>\n              {posts.length !== 0\n                ? (\n                  <PostsList\n                    changePostId={changePostId}\n                    selectedPostId={selectedPostID}\n                    posts={posts}\n                  />\n                )\n                : <h2>User don`t have any posts yet</h2>}\n            </>\n          )\n            : <Loader />}\n\n        </div>\n\n        {selectedPostID !== 0 && (\n          <div className=\"App__content\">\n            <PostDetails selectedPostId={selectedPostID} />\n          </div>\n        )}\n\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import { BASE_URL } from './api';\n\nexport const getUsers = ():Promise<User[]> => {\n  return fetch(`${BASE_URL}/users`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Error');\n      }\n\n      return response.json();\n    });\n};\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}